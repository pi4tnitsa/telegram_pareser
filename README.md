# Telegram Канал Мониторинг Бот

Этот бот отслеживает посты в каналах Telegram, сохраняет их в базу данных SQLite и позволяет экспортировать данные в форматах Excel или JSON.

## Возможности

- Автоматический мониторинг сообщений в каналах Telegram
- Сохранение данных в базу SQLite
- Экспорт данных в Excel или JSON
- Фильтрация данных по месяцам
- Учет реакций, просмотров и типов медиа

## Требования

- Python 3.7+
- Библиотеки из файла requirements.txt
- Учетная запись Telegram
- API ключи Telegram

## Установка

1. Клонируйте репозиторий или скачайте файлы
2. Установите зависимости:

```bash
pip install -r requirements.txt
```

3. Добавьте в файл `config.py` свои данные:

```python
api_id = 'ваш_api_id'  # Получите на сайте my.telegram.org
api_hash = 'ваш_api_hash'  # Получите на сайте my.telegram.org
BOT_TOKEN = 'токен_вашего_бота'  # Получите у BotFather в Telegram
```

## Получение API ключей

1. Зарегистрируйте приложение на [my.telegram.org](https://my.telegram.org):
   - Войдите в свой аккаунт Telegram
   - Перейдите в раздел "API development tools"
   - Создайте новое приложение
   - Получите `api_id` и `api_hash`

2. Создайте бота у [BotFather](https://t.me/BotFather):
   - Отправьте команду `/newbot`
   - Следуйте инструкциям для создания бота
   - Получите токен вашего бота (BOT_TOKEN)

## Запуск

1. Запустите скрипт:

```bash
python telegram_bot.py
```

2. Введите номер телефона в формате `+79998887766`, когда программа запросит
3. Введите код подтверждения, который придет в Telegram
4. Отправьте команду `/start` вашему боту в Telegram

## Использование

После запуска бот автоматически начнет отслеживать сообщения в каналах Telegram, к которым у вас есть доступ.

### Меню бота

- **Выгрузить посты за текущий месяц** — экспорт данных за текущий месяц в Excel
- **Выгрузить всю таблицу** — экспорт всех данных в Excel
- **Выгрузить посты за определённый месяц** — выбор месяца и экспорт данных в Excel
- **Экспорт в JSON** — экспорт данных в формате JSON с различными опциями фильтрации

## Структура базы данных

База данных `channel_posts.db` включает таблицу `posts` со следующими полями:

- `id` — Уникальный идентификатор записи
- `date` — Дата публикации
- `channel_name` — Название канала
- `content` — Содержание поста
- `reactions` — Количество реакций
- `views` — Количество просмотров
- `media_type` — Тип медиа (фото, документ, видео и т.д.)
- `media_path` — Путь к сохраненному медиафайлу (если есть)

## Примечания

- База данных и сессия Telethon сохраняются в текущей директории
- При первом запуске необходимо авторизоваться в Telegram
- Для корректной работы бота требуется стабильное интернет-соединение

## Устранение неполадок

1. **Ошибка подключения к Telegram API**:
   - Проверьте корректность `api_id` и `api_hash`
   - Убедитесь в стабильности интернет-соединения

2. **Бот не отвечает на команды**:
   - Проверьте правильность `BOT_TOKEN`
   - Убедитесь, что бот запущен и скрипт выполняется

3. **Ошибки с базой данных**:
   - Проверьте права доступа к директории для создания/изменения файла базы данных
   - При необходимости удалите файл базы данных и перезапустите скрипт

## Лицензия

Данный проект распространяется под лицензией MIT. Подробности в файле LICENSE.
